<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Suitsupply Store URL Finder</title>
  <style>
    :root {
      --bg: #0f0f10;
      --panel: #1a1a1d;
      --border: #2a2a30;
      --text-main: #f5f5f7;
      --text-dim: #8a8a94;
      --accent: #ffffff;
      --radius-xl: 1.25rem;
      --radius-lg: 0.75rem;
      --radius-sm: 0.5rem;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", Roboto, "Helvetica Neue", sans-serif;
    }

    body {
      background-color: var(--bg);
      color: var(--text-main);
      min-height: 100vh;
      padding: 2rem;
      display: flex;
      align-items: flex-start;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 480px;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.07) 0%, rgba(0,0,0,0) 60%), var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      padding: 1.5rem 1.5rem 2rem;
      box-shadow: 0 30px 80px rgba(0,0,0,0.8), 0 2px 4px rgba(0,0,0,0.6);
    }

    header { margin-bottom: 1.5rem; }

    .title {
      font-size: 1.1rem;
      font-weight: 600;
      line-height: 1.3;
      color: var(--text-main);
      display: flex;
      align-items: baseline;
      gap: .5rem;
      flex-wrap: wrap;
    }

    .badge {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: var(--radius-lg);
      padding: 0.2rem .5rem;
      font-size: .7rem;
      font-weight: 500;
      color: var(--text-dim);
      line-height: 1.2;
    }

    .desc {
      font-size: .8rem;
      font-weight: 400;
      color: var(--text-dim);
      line-height: 1.4;
    }

    .field-label {
      font-size: .7rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: .05em;
      color: var(--text-dim);
      margin-bottom: .5rem;
      margin-top: 1.5rem;
    }

    .input-wrap {
      background-color: rgba(255,255,255,0.03);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .input-row {
      display: flex;
      align-items: center;
      padding: .75rem .9rem;
      width: 100%;
    }

    .input-row input {
      background: transparent;
      border: none;
      outline: none;
      width: 100%;
      font-size: .9rem;
      color: var(--text-main);
    }

    .input-row input::placeholder {
      color: var(--text-dim);
    }

    .suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: #1f1f22;
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
      max-height: 200px;
      overflow-y: auto;
      display: none;
      z-index: 10;
    }

    .suggestion-item {
      padding: .6rem .9rem;
      font-size: .8rem;
      line-height: 1.3;
      color: var(--text-main);
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }

    .suggestion-left {
      display: flex;
      flex-direction: column;
    }

    .suggestion-name {
      font-weight: 500;
    }

    .suggestion-meta {
      font-size: .7rem;
      color: var(--text-dim);
      line-height: 1.2;
    }

    .suggestion-item:hover {
      background-color: rgba(255,255,255,0.07);
    }

    .results-card {
      margin-top: 1rem;
      background-color: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 1rem 1rem 1.25rem;
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: .75rem;
      flex-wrap: wrap;
    }

    .store-name {
      font-size: .9rem;
      font-weight: 600;
      color: var(--text-main);
      line-height: 1.3;
      word-break: break-word;
    }

    .country-pill {
      font-size: .65rem;
      line-height: 1.2;
      padding: .25rem .5rem;
      border-radius: var(--radius-sm);
      background: rgba(255,255,255,0.07);
      border: 1px solid rgba(255,255,255,0.15);
      color: var(--text-main);
      min-width: max-content;
    }

    .locale-pill {
      font-size: .65rem;
      line-height: 1.2;
      padding: .25rem .5rem;
      border-radius: var(--radius-sm);
      background: rgba(255,255,255,0.07);
      border: 1px solid rgba(255,255,255,0.15);
      color: var(--text-dim);
      min-width: max-content;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
    }

    .url-label {
      margin-top: .75rem;
      font-size: .7rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: .05em;
      color: var(--text-dim);
    }

    .url-row {
      margin-top: .4rem;
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
      align-items: flex-start;
    }

    .url-box {
      background-color: rgba(0,0,0,0.4);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: .6rem .75rem;
      font-size: .8rem;
      line-height: 1.4;
      color: var(--accent);
      word-break: break-all;
      user-select: all;
      flex: 1 1 auto;
      min-width: 200px;
    }

    .actions-col {
      display: flex;
      flex-direction: column;
      gap: .5rem;
      min-width: 110px;
    }

    .action-btn {
      background-color: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: var(--radius-sm);
      padding: .5rem .75rem;
      font-size: .75rem;
      line-height: 1.2;
      color: var(--text-main);
      cursor: pointer;
      text-align: center;
      text-decoration: none;
    }

    .action-btn:active {
      transform: scale(.98);
    }

    .no-result {
      font-size: .8rem;
      line-height: 1.4;
      color: var(--text-dim);
    }

    footer {
      margin-top: 1.5rem;
      text-align: center;
      font-size: .7rem;
      line-height: 1.4;
      color: var(--text-dim);
    }

    footer code {
      background: rgba(255,255,255,0.07);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: var(--radius-sm);
      padding: .15rem .4rem;
      font-size: .7rem;
      color: var(--text-main);
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title">
        <div>Suitsupply Store URL Finder</div>
        <div class="badge">internal tool</div>
      </div>
      <div class="desc">Type any store and get its official Suitsupply URL.</div>
    </header>

    <div class="field-label">Store lookup</div>

    <div class="input-wrap">
      <div class="input-row">
        <input id="searchInput" type="text" placeholder="Try: dubai moe, panama city, dusseldorf, madrid…" autocomplete="off" />
      </div>
      <div id="suggestions" class="suggestions"></div>
    </div>

    <div id="resultCard" class="results-card">
      <div id="resultInner">
        <div class="no-result">Start typing a store name to see a match.</div>
      </div>
    </div>

    <footer>
      Tip: if a store isn't found, add it in <code>storesData</code> below with its slug.
    </footer>
  </div>

  <script>
    // -------------------------------------------------
    // Helper functions
    // -------------------------------------------------

    // normalizeText:
    // lowercases, strips accents, turns ü->u, ä->a, ß->ss, etc.
    function normalizeText(str) {
      return str
        .toLowerCase()
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .replace(/ß/g, "ss")
        .replace(/ö/g, "o")
        .replace(/ü/g, "u")
        .replace(/ä/g, "a");
    }

    // Levenshtein distance:
    // how many single-character edits to go from a -> b
    function levenshtein(a, b) {
      const m = a.length;
      const n = b.length;
      const dp = Array.from({ length: m + 1 }, () => new Array(n + 1).fill(0));

      for (let i = 0; i <= m; i++) dp[i][0] = i;
      for (let j = 0; j <= n; j++) dp[0][j] = j;

      for (let i = 1; i <= m; i++) {
        for (let j = 1; j <= n; j++) {
          const cost = a[i - 1] === b[j - 1] ? 0 : 1;
          dp[i][j] = Math.min(
            dp[i - 1][j] + 1,
            dp[i][j - 1] + 1,
            dp[i - 1][j - 1] + cost
          );
        }
      }
      return dp[m][n];
    }

    function buildStoreURL(locale, slug) {
      return `https://suitsupply.com/${locale}/stores/${slug}`;
    }

    function setClipboard(text) {
      navigator.clipboard.writeText(text).catch(() => {});
    }

    // -------------------------------------------------
    // Store data
    // -------------------------------------------------
    //
    // Each entry:
    //  name: label in UI
    //  country: "United States", "Spain", etc.
    //  locale: e.g. "en-nl"
    //  slug: last part of the URL
    //  aliases: typos / shorthand / mall names / neighborhood names
    //
    // United States store list was gathered from Suitsupply’s live U.S. locator on 28 Oct 2025,
    // which shows locations like Atlanta, Austin, Bellevue, Boston, Chicago, Dallas, Denver,
    // Edina Minneapolis, Greenwich, Houston, King of Prussia, LA Abbot Kinney, LA Century City,
    // Las Vegas, Miami Beach, Miami Brickell, NJ Short Hills, NY Brookfield Place, NY Hudson Yards,
    // NY Madison Avenue, NY Soho, NY Williamsburg, Newport Beach, Philadelphia, Plano,
    // Roosevelt Field Mall, San Francisco, San Jose, Scottsdale, Seattle Downtown,
    // St. Louis, Tysons Galleria (McLean VA), Washington DC. :contentReference[oaicite:1]{index=1}
    //
    // Other countries and cities were gathered from their respective country pages
    // (Netherlands, Germany, Spain, Sweden, Switzerland, UAE, etc.) and specific store pages,
    // same date 28 Oct 2025. :contentReference[oaicite:2]{index=2}
    //
    const storesData = [
      // Netherlands (en-nl)
      { name: "Amsterdam", country: "Netherlands", locale: "en-nl", slug: "amsterdam", aliases: ["ams","amsterdam"] },
      { name: "Breda", country: "Netherlands", locale: "en-nl", slug: "breda", aliases: ["breda"] },
      { name: "Den Bosch", country: "Netherlands", locale: "en-nl", slug: "denbosch", aliases: ["den bosch","denbosch","s-hertogenbosch","hertogenbosch"] },
      { name: "The Hague", country: "Netherlands", locale: "en-nl", slug: "denhaag", aliases: ["the hague","den haag","denhaag","hague"] },
      { name: "Groningen", country: "Netherlands", locale: "en-nl", slug: "groningen", aliases: ["groningen","groning"] },
      { name: "Haarlem", country: "Netherlands", locale: "en-nl", slug: "haarlem", aliases: ["haarlem"] },
      { name: "Hoofddorp A4", country: "Netherlands", locale: "en-nl", slug: "hoofddorp", aliases: ["hoofddorp","hoofddorp a4","a4"] },
      { name: "Laren", country: "Netherlands", locale: "en-nl", slug: "laren", aliases: ["laren"] },
      { name: "Leiden", country: "Netherlands", locale: "en-nl", slug: "leiden", aliases: ["leiden"] },
      { name: "Lelystad", country: "Netherlands", locale: "en-nl", slug: "lelystad", aliases: ["lelystad","lely stad"] },
      { name: "Maastricht", country: "Netherlands", locale: "en-nl", slug: "maastricht", aliases: ["maastricht","maastrich","maastrigt"] },
      { name: "Roosendaal", country: "Netherlands", locale: "en-nl", slug: "roosendaal", aliases: ["roosendaal","roosendal"] },
      { name: "Rotterdam", country: "Netherlands", locale: "en-nl", slug: "rotterdam", aliases: ["rotterdam","roterdam","rdam"] },
      { name: "Utrecht", country: "Netherlands", locale: "en-nl", slug: "utrecht", aliases: ["utrecht","utrech","utrecht a2","a2"] },
      { name: "Utrecht A2", country: "Netherlands", locale: "en-nl", slug: "utrecht", aliases: ["utrecht a2","a2","utrecht"] },
      { name: "Wilp A1", country: "Netherlands", locale: "en-nl", slug: "wilp", aliases: ["wilp","a1","wilp a1"] },

      // Germany (en-de)
      { name: "Berlin Münzstraße", country: "Germany", locale: "en-de", slug: "berlin", aliases: ["berlin","munzstrasse","munzstraße","munzstrase"] },
      { name: "Düsseldorf Königsallee", country: "Germany", locale: "en-de", slug: "dusseldorf", aliases: ["dusseldorf","düsseldorf","dusseldof","dusseldorff","konigsallee","königsallee","koenigsallee","konig","dusseldolf"] },
      { name: "Frankfurt Neue Mainzer", country: "Germany", locale: "en-de", slug: "frankfurt", aliases: ["frankfurt","frankfut","mainzer","neue mainzer"] },
      { name: "Hamburg Bleichenbrücke", country: "Germany", locale: "en-de", slug: "hamburg", aliases: ["hamburg","bleichenbrucke","bleichenbrücke","bleichenbruecke"] },
      { name: "Hamburg Breuninger", country: "Germany", locale: "en-de", slug: "hamburg-breuninger", aliases: ["hamburg breuninger","breuninger hamburg","hamburg breuniger","breuniger"] },
      { name: "Leipzig Breuninger", country: "Germany", locale: "en-de", slug: "leipzig-breuninger", aliases: ["leipzig","leipzig breuninger"] },
      { name: "Munich Brienner Strasse", country: "Germany", locale: "en-de", slug: "munich", aliases: ["munich","munchen","muenchen","brienner","brienner strasse","brienner straße"] },
      { name: "Munich Breuninger", country: "Germany", locale: "en-de", slug: "munich-breuninger", aliases: ["munich breuninger","munchen breuninger","muenchen breuninger","breuninger munich"] },
      { name: "Stuttgart Dorotheen Quartier", country: "Germany", locale: "en-de", slug: "stuttgart", aliases: ["stuttgart","stutgart","dorotheen quartier","dorotheenquartier","dorotheen"] },

      // United Kingdom (en-gb)
      { name: "London Lime Street", country: "United Kingdom", locale: "en-gb", slug: "london-lime", aliases: ["london lime","lime street","lime st","city of london","ec3m","london lime street"] },
      { name: "London Vigo Street", country: "United Kingdom", locale: "en-gb", slug: "london-vigo", aliases: ["london vigo","vigo street","vigo st","w1s","regent street","piccadilly"] },
      { name: "London Westfield", country: "United Kingdom", locale: "en-gb", slug: "london-westfield", aliases: ["westfield","westfield london","shepherds bush","w12","westfeild","westfield mall london"] },

      // Belgium (en-be)
      { name: "Brussels", country: "Belgium", locale: "en-be", slug: "brussels", aliases: ["brussels","bruxelles","brussel","marnixlaan","marnix laan","belgium"] },
      { name: "Antwerp", country: "Belgium", locale: "en-be", slug: "antwerp", aliases: ["antwerp","antwerpen","antwarp","belgium antwerp"] },

      // Denmark (en-dk)
      { name: "Copenhagen", country: "Denmark", locale: "en-dk", slug: "copenhagen", aliases: ["copenhagen","kopenhagen","københavn","kobenhavn","grønnegade","gronnegade","denmark","cph"] },

      // Estonia (en-ee)
      { name: "Tallinn", country: "Estonia", locale: "en-ee", slug: "tallinn", aliases: ["tallinn","talinn","rotermanni","rotermanni 14","estonia"] },

      // Finland (en-fi)
      { name: "Helsinki", country: "Finland", locale: "en-fi", slug: "helsinki", aliases: ["helsinki","helsinky","etelaesplanadi","eteläesplanadi","esplanadi","finland","esplanade"] },

      // France (en-fr)
      { name: "Paris", country: "France", locale: "en-fr", slug: "paris", aliases: ["paris","rue de la paix","rue dela paix","rue de la paix 20","75002","france paris","pariis"] },

      // Latvia (en-lv)
      { name: "Riga", country: "Latvia", locale: "en-lv", slug: "riga", aliases: ["riga","rigga","galleria riga","dzirnavu 67","latvia"] },

      // Lithuania (en-lt)
      { name: "Vilnius", country: "Lithuania", locale: "en-lt", slug: "vilnius", aliases: ["vilnius","vilnus","europa sc","europa mall","konstitucijos","lithuania","vilnius europa"] },

      // Spain (en-es)
      { name: "Madrid", country: "Spain", locale: "en-es", slug: "madrid", aliases: ["madrid","madrid villanueva","calle villanueva","villanueva 20","spain madrid","madrid store"] },

      // Sweden (en-se)
      { name: "Stockholm", country: "Sweden", locale: "en-se", slug: "stockholm", aliases: ["stockholm","stockhom","norrlandsgatan","norrlandsgatan 13","sweden","sthlm"] },

      // Switzerland (en-ch)
      { name: "Zürich", country: "Switzerland", locale: "en-ch", slug: "zurich", aliases: ["zurich","zuerich","zürich","nuschelerstrasse","nüschelerstrasse","nusschelerstrasse","switzerland","zrh"] },

      // United Arab Emirates (en-ae)
      { name: "Dubai Gate Avenue (DIFC)", country: "United Arab Emirates", locale: "en-ae", slug: "dubaiga", aliases: ["dubai gate avenue","gate avenue","difc","dubai difc","dubai gate av","gate av","uae dubai"] },
      { name: "Dubai Mall of the Emirates", country: "United Arab Emirates", locale: "en-ae", slug: "dubaimoe", aliases: ["dubai moe","mall of the emirates","moe","dubai mall of emirates","uae dubai mall","dubai mall emirates"] },

      // Australia (en-au)
      { name: "Sydney", country: "Australia", locale: "en-au", slug: "sydney", aliases: ["sydney","sydney martin place","martin place","australia","sydney cbd"] },

      // Canada (en-ca)
      { name: "Montréal", country: "Canada", locale: "en-ca", slug: "montreal", aliases: ["montreal","montréal","mtl","montreall","quebec","qc"] },
      { name: "Toronto", country: "Canada", locale: "en-ca", slug: "toronto", aliases: ["toronto","torono","yorkville","bloor","toronto on","toronto canada"] },
      { name: "Vancouver", country: "Canada", locale: "en-ca", slug: "vancouver", aliases: ["vancouver","vancover","van city","vancouver bc","bc"] },

      // Panama (served under en-us)
      { name: "Panama City", country: "Panama", locale: "en-us", slug: "panama-city", aliases: ["panama","panama city","panamá","multiplaza","multiplaza mall","panama mall","panama ciudad"] },

      // China Mainland (en-cn)
      { name: "Beijing", country: "China Mainland", locale: "en-cn", slug: "beijing", aliases: ["beijing","peking","dongdaqiao","chaoyang","bejing","bejing china"] },
      { name: "Shanghai Anfu Road", country: "China Mainland", locale: "en-cn", slug: "shanghai-mansion", aliases: ["shanghai","anfu road","anfu lu","xuhui","shanghai anfu","shanghai mansion","shanghai china"] },

      // South Korea (en-kr)
      { name: "Seoul Cheongdam", country: "South Korea", locale: "en-kr", slug: "seoul", aliases: ["seoul","seoul cheongdam","cheongdam","cheongdam flagship","gangnam","gangnam-gu","cheongdam seoul"] },
      { name: "Seoul Hannam", country: "South Korea", locale: "en-kr", slug: "seoulhannam", aliases: ["seoul hannam","hannam","hannam flagship","yongsan-gu","itaewon","han nam"] },
      { name: "Seoul Lotte Main", country: "South Korea", locale: "en-kr", slug: "seoullm", aliases: ["lotte main","lotte main seoul","lotte namdaemun","namdaemun","lotte dept main","lotte main store","seoul lotte main"] },
      { name: "Seoul Lotte Jamsil", country: "South Korea", locale: "en-kr", slug: "jamsil", aliases: ["jamsil","lotte jamsil","songpa-gu","jamsil lotte","seoul jamsil"] },
      { name: "Seoul Shinsegae Gangnam", country: "South Korea", locale: "en-kr", slug: "seoul-gangnam", aliases: ["gangnam","shinsegae gangnam","gangnam branch","sinbanpo-ro","gangnam dept store"] },
      { name: "Seoul Cheonho (Hyundai)", country: "South Korea", locale: "en-kr", slug: "seoulcheonho", aliases: ["cheonho","cheongho","hyundai cheonho","cheonho-daero","gangdong-gu","seoul cheonho"] },
      { name: "Seoul Coex Mall", country: "South Korea", locale: "en-kr", slug: "seoulcoexmall", aliases: ["coex","coex mall","coexmall","coex seoul","gangnam coex"] },
      { name: "Busan Lotte", country: "South Korea", locale: "en-kr", slug: "busan", aliases: ["busan","busan lotte","lotte busan","gaya-daero","busanjin-gu","pusan"] },

      // Italy (Milan) — observed hosted under en-de/milan
      { name: "Milan", country: "Italy", locale: "en-de", slug: "milan", aliases: ["milan","milano","milan italy","italy milan"] },

      // United States (en-us)
      // New York metro
      { name: "NY Madison Avenue", country: "United States", locale: "en-us", slug: "newyork-madison", aliases: ["madison","madison ave","ny madison","new york madison","madison avenue","madison nyc"] },
      { name: "NY Hudson Yards", country: "United States", locale: "en-us", slug: "newyork-hudson", aliases: ["hudson","hudson yards","ny hudson","new york hudson","hudsonyard","hudson yards nyc"] },
      { name: "NY Soho", country: "United States", locale: "en-us", slug: "newyork-soho", aliases: ["soho","ny soho","new york soho","soho nyc","soho manhattan"] },
      { name: "NY Williamsburg", country: "United States", locale: "en-us", slug: "nywilliamsburg", aliases: ["williamsburg","williamsberg","brooklyn","ny williamsburg","bk williamsburg"] },
      { name: "NY Brookfield Place", country: "United States", locale: "en-us", slug: "brookfieldplace", aliases: ["brookfield place","brookfield","vesey","230 vesey","ny brookfield","brookfield nyc"] },
      { name: "Roosevelt Field Mall", country: "United States", locale: "en-us", slug: "rooseveltfield", aliases: ["roosevelt field","roosevelt mall","roosvelt","garden city","long island","roosevelt field mall"] },
      { name: "NJ Short Hills", country: "United States", locale: "en-us", slug: "shorthills", aliases: ["short hills","short-hills","short hills mall","short hills nj","short hills new jersey"] },
      { name: "Greenwich", country: "United States", locale: "en-us", slug: "greenwich", aliases: ["greenwich","greenwich ct","mason street","connecticut","ct greenwich"] },
      { name: "King of Prussia", country: "United States", locale: "en-us", slug: "kingofprussia", aliases: ["king of prussia","kop","kingofprussia mall","n gulph road","philadelphia suburb","philly suburbs"] },
      { name: "Philadelphia", country: "United States", locale: "en-us", slug: "philadelphia", aliases: ["philadelphia","philly","locust street","center city","phila"] },
      { name: "Washington DC", country: "United States", locale: "en-us", slug: "washington", aliases: ["dc","washington","washington dc","district of columbia","dupont","georgetown"] },
      { name: "Tysons Galleria", country: "United States", locale: "en-us", slug: "tysons", aliases: ["tysons","tysons corner","tyson's","mclean","virginia","tysons galleria"] },

      // Boston / Northeast / Midwest
      { name: "Boston", country: "United States", locale: "en-us", slug: "boston", aliases: ["boston","newbury street","back bay","massachusetts","ma boston"] },
      { name: "Chicago", country: "United States", locale: "en-us", slug: "chicago", aliases: ["chicago","rush street","gold coast","chitown","chi"] },
      { name: "Edina Minneapolis", country: "United States", locale: "en-us", slug: "minneapolis", aliases: ["edina","minneapolis","galleria edina","twin cities","mn","minnesota"] },
      { name: "St. Louis", country: "United States", locale: "en-us", slug: "stlouis", aliases: ["st louis","st. louis","saint louis","maryland plaza","missouri","stl"] },

      // Texas / South / Southeast
      { name: "Dallas", country: "United States", locale: "en-us", slug: "dallas", aliases: ["dallas","mckinney ave","uptown dallas","texas dallas","tx dallas"] },
      { name: "Houston", country: "United States", locale: "en-us", slug: "houston", aliases: ["houston","westheimer","river oaks","houston tx","htx"] },
      { name: "Austin", country: "United States", locale: "en-us", slug: "austin", aliases: ["austin","domain blvd","domain northside","atx","austin tx"] },
      { name: "Atlanta", country: "United States", locale: "en-us", slug: "atlanta", aliases: ["atlanta","lenox","around lenox","atl","atl ga","lenox mall"] },
      { name: "Miami Beach", country: "United States", locale: "en-us", slug: "miamibeach", aliases: ["miami beach","south beach","1000 17th street","miami bch","miami beach fl"] },
      { name: "Miami Brickell", country: "United States", locale: "en-us", slug: "miamibrickell", aliases: ["brickell","brickell city centre","brickell city center","miami brickell","downtown miami"] },

      // West Coast
      { name: "LA Abbot Kinney", country: "United States", locale: "en-us", slug: "abbotkinney", aliases: ["abbot kinney","abbotkinney","venice","venice beach","los angeles","la abbot kinney"] },
      { name: "LA Century City", country: "United States", locale: "en-us", slug: "lacenturycity", aliases: ["century city","la century city","10250 santa monica blvd","los angeles","la"] },
      { name: "Newport Beach", country: "United States", locale: "en-us", slug: "newportbeach", aliases: ["newport beach","fashion island","newport center drive","oc","orange county","oc newport"] },
      { name: "San Francisco", country: "United States", locale: "en-us", slug: "sanfrancisco", aliases: ["san francisco","sf","maiden lane","union square","bay area","sfo","frisco"] },
      { name: "San Jose", country: "United States", locale: "en-us", slug: "sanjose", aliases: ["san jose","santana row","silicon valley","sj","bay area south"] },
      { name: "Seattle Downtown", country: "United States", locale: "en-us", slug: "seattle", aliases: ["seattle","seattle downtown","university street","pnw","washington state","seattle wa"] },
      { name: "Bellevue", country: "United States", locale: "en-us", slug: "bellevue", aliases: ["bellevue","bellevue square","eastside seattle","washington","wa bellevue"] },
      { name: "Denver", country: "United States", locale: "en-us", slug: "denver", aliases: ["denver","cherry creek north","detroit st","colorado","co denver"] },
      { name: "Scottsdale", country: "United States", locale: "en-us", slug: "phoenix", aliases: ["scottsdale","scottsdale rd","15257 n scottsdale","phoenix","phx","arizona"] },
      { name: "Las Vegas", country: "United States", locale: "en-us", slug: "lasvegas", aliases: ["las vegas","vegas","las vegas blvd","strip","fashion show mall","nv las vegas"] },
      { name: "Plano", country: "United States", locale: "en-us", slug: "plano", aliases: ["plano","legacy west","windrose ave","dallas plano","plano tx"] }
    ];

    // -------------------------------------------------
    // Search logic
    // -------------------------------------------------

    const inputEl = document.getElementById("searchInput");
    const resultInner = document.getElementById("resultInner");
    const suggestionsEl = document.getElementById("suggestions");

    // allKeysForStore:
    // return normalized list of store.name and aliases for searching
    function allKeysForStore(store) {
      const arr = [store.name, store.country];
      if (store.aliases) arr.push(...store.aliases);
      return arr.map(k => normalizeText(k));
    }

    // findBestStore:
    // 1. startsWith
    // 2. includes
    // 3. fuzzy distance (<=2 edits)
    function findBestStore(queryRaw) {
      const q = normalizeText(queryRaw.trim());
      if (!q) return null;

      // pass 1: startsWith
      for (const store of storesData) {
        for (const key of allKeysForStore(store)) {
          if (key.startsWith(q)) {
            return store;
          }
        }
      }

      // pass 2: includes
      for (const store of storesData) {
        for (const key of allKeysForStore(store)) {
          if (key.includes(q)) {
            return store;
          }
        }
      }

      // pass 3: fuzzy distance
      let best = null;
      let bestDistance = 3; // protective cap so total nonsense doesn't match
      for (const store of storesData) {
        for (const key of allKeysForStore(store)) {
          const dist = levenshtein(q, key);
          if (dist < bestDistance) {
            bestDistance = dist;
            best = store;
          }
        }
      }
      if (best && bestDistance <= 2) {
        return best;
      }

      return null;
    }

    // findSuggestionList:
    // rank stores by closeness to query and return up to 8
    function findSuggestionList(queryRaw) {
      const q = normalizeText(queryRaw.trim());
      if (!q) return [];

      const scored = storesData.map(store => {
        let score = Infinity;
        for (const key of allKeysForStore(store)) {
          const keyNorm = normalizeText(key);
          const dist = levenshtein(q, keyNorm);

          const starts = keyNorm.startsWith(q) ? 0 : 10;
          const incl = keyNorm.includes(q) ? 1 : 10;

          const localScore = Math.min(dist, starts, incl);
          if (localScore < score) score = localScore;
        }
        return { store, score };
      });

      scored.sort((a, b) => a.score - b.score);

      return scored
        .filter(x => x.score <= 3)
        .slice(0, 8)
        .map(x => x.store);
    }

    // -------------------------------------------------
    // UI rendering
    // -------------------------------------------------

    function renderResult(store) {
      if (!store) {
        resultInner.innerHTML = `
          <div class="no-result">
            No match. Add this store to <code>storesData</code>.
          </div>
        `;
        return;
      }

      const fullURL = buildStoreURL(store.locale, store.slug);

      resultInner.innerHTML = `
        <div class="result-header">
          <div class="store-name">${store.name}</div>
          <div class="pill-row">
            <div class="country-pill">${store.country}</div>
            <div class="locale-pill">${store.locale}</div>
          </div>
        </div>
        <div class="url-label">Full URL</div>
        <div class="url-row">
          <div class="url-box" id="urlBox">${fullURL}</div>
          <div class="actions-col">
            <button class="action-btn" id="copyBtn">Copy URL</button>
            <a class="action-btn" id="openBtn" href="${fullURL}" target="_blank" rel="noopener noreferrer">Open link</a>
          </div>
        </div>
      `;

      const copyBtn = document.getElementById("copyBtn");
      copyBtn.addEventListener("click", () => {
        setClipboard(fullURL);
        copyBtn.textContent = "Copied!";
        setTimeout(() => (copyBtn.textContent = "Copy URL"), 1500);
      });
    }

    function pickStore(store) {
      inputEl.value = store.name;
      renderResult(store);
      hideSuggestions();
    }

    function showSuggestions(list) {
      if (!list.length) {
        hideSuggestions();
        return;
      }

      suggestionsEl.innerHTML = list.map(store => `
        <div class="suggestion-item" data-name="${store.name}">
          <div class="suggestion-left">
            <div class="suggestion-name">${store.name}</div>
            <div class="suggestion-meta">${store.country} • ${store.locale}</div>
          </div>
        </div>
      `).join("");

      suggestionsEl.style.display = "block";

      const items = suggestionsEl.querySelectorAll(".suggestion-item");
      items.forEach(item => {
        item.addEventListener("click", () => {
          const name = item.getAttribute("data-name");
          const store = storesData.find(s => s.name === name);
          if (store) pickStore(store);
        });
      });
    }

    function hideSuggestions() {
      suggestionsEl.style.display = "none";
    }

    function handleInputChange() {
      const q = inputEl.value;

      const best = findBestStore(q);
      renderResult(best);

      const list = findSuggestionList(q);
      showSuggestions(list);
    }

    document.addEventListener("click", (e) => {
      if (!e.target.closest(".input-wrap")) {
        hideSuggestions();
      }
    });

    inputEl.addEventListener("input", handleInputChange);
    inputEl.addEventListener("focus", handleInputChange);
  </script>
</body>
</html>
